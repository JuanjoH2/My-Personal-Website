---
import MusicLayout from "../../layouts/MusicLayout.astro";
import musicData from "../../data/music.json";

const { piece } = Astro.props;
const alternatePieces = musicData.filter((p) => p.parentId === piece.slug);

// DYNAMIC ROUTING: Tells Astro which pages to build
export async function getStaticPaths() {
    return musicData.map((piece) => ({
        // The URL will be /music/celestial-waltz, /music/cyberpunk-dreams, etc.
        params: { slug: piece.slug },
        // Pass the entire piece data to the page component (props)
        props: { piece },
    }));
}
---

<MusicLayout piece={piece} />
