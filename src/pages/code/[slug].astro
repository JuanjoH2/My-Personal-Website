---
import type { Project } from "../../components/codeComponents/ProjectCard.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import projectsData from "../../data/code.json";
import BackButtonComponent from "../../components/BackButtonComponent.astro";
import GitHub from "../../../public/icons/github.svg";

// Get all slugs for static path generation
export function getStaticPaths() {
    return (projectsData as Project[]).map((project) => ({
        params: { slug: project.slug },
        props: { project },
    }));
}

// Get the specific project data passed in props
const { project } = Astro.props as { project: Project };

const pageTitle = project.name;
---

<BaseLayout pageTitle={pageTitle}>
    <BackButtonComponent href="/code" />
    <div class="GitHub-div">
        <a href={project.githubUrl} target="_blank" class="GitHub-a">
            <GitHub class="GitHub-icon" />
        </a>
    </div>

    <section class="project-page-content">
        <div class="project-grid-info">
            <div class="grid-box box-1">
                <img src={project.image} alt={`Visual for ${project.name}`} />
            </div>

            <div class="grid-box box-2">
                <p>Changing the way we make business by making it fun.</p>
            </div>

            <div class="grid-box box-3">
                <p>
                    This Flutter webapp adds challenge & gamification to the
                    habit-creation process by challenging your friend to keep a
                    streak for the desired habit.
                </p>
            </div>
        </div>
    </section>
    <section class="project-demo-section">
        <div class="demo-div">
            <iframe
                src={project.demoUrl}
                title={`Live demo of ${project.name}`}
                loading="lazy"></iframe>
        </div>
    </section>
</BaseLayout>

<!-- <section class="project-page-content">
        <header class="project-header">
            <h1>{project.name}</h1>
            <p class="description">{project.description}</p>

            <div class="links">
                <a
                    href={project.githubUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    View on GitHub
                </a>
                <a
                    href={project.demoUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    Open Full Demo
                </a>
            </div>
        </header>

        <div class="project-demo-container">
            <h2>Live Demo</h2>
            <iframe
                src={project.demoUrl}
                title={`Live demo of ${project.name}`}
                loading="lazy"></iframe>
        </div>
    </section> -->

<style>
    .project-page-content {
        max-width: 1000px;
        margin: 64px auto;
        padding: 0 20px;
    }

    .description {
        font-size: 1.1rem;
        color: #aaa;
    }

    .links {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        gap: 20px;
    }

    .links a {
        padding: 10px 20px;
        border: 1px solid white;
        border-radius: 8px;
        text-decoration: none;
        transition: background-color 0.2s;
    }

    .links a:hover {
        background-color: #0091e1; /* Use your brand color */
        border-color: #0091e1;
    }

    /* ------------------------------------ */
    /* NEW GRID LAYOUT FOR INFO BOXES       */
    /* ------------------------------------ */
    .project-grid-info {
        /* Center the grid container itself */
        max-width: 600px;
        margin: 40px auto;

        /* 1. Establish the Grid */
        display: grid;
        /* Two equal columns */
        grid-template-columns: 1fr 1fr;
        gap: 20px; /* Space between the boxes */

        text-align: center;
    }

    .grid-box {
        /* Common styles for all three boxes */
        border-radius: 16px;
        border: 1px solid white;
        background-color: black;
        padding: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px; /* Ensures height consistency */
        font-size: 1.1rem;
        text-align: center;
    }

    /* 2. Specific Box Styling */

    /* Box 3 must span both columns */
    .box-3 {
        grid-column: 1 / span 2;
        font-size: 1.25rem;
        /* Increase padding for the large box */
        padding: 32px;
    }

    /* Image box styling */
    .box-1 img {
        /* Make image fit the box nicely */
        max-width: 100%;
        max-height: 100%;
        border-radius: 8px; /* Optional: adds subtle rounding to the image */
        object-fit: cover;
    }

    /* Mobile adjustments: Stack all boxes vertically */
    @media (max-width: 600px) {
        .project-grid-info {
            grid-template-columns: 1fr; /* Single column layout */
            gap: 16px;
        }

        .box-3 {
            grid-column: 1 / 1; /* Reset to single column span */
            font-size: 1rem;
        }
    }

    .project-demo-section {
        margin: 16px;
    }

    .demo-div {
        width: 100%;
        height: 100%;
    }
    iframe {
        width: 100%;
        height: 100%;
        border-radius: 16px;
    }

    /* ------------------------------------ */
    /* GITHUB BUTTON STYLES                 */
    /* ------------------------------------ */
    .GitHub-icon {
        padding: 16px 16px;
        background-color: black;
        color: white;
        border: 1px solid white;
        border-radius: 8px;
        position: fixed;
        right: 32px;
        bottom: 32px;
        z-index: 16;
    }

    .GitHub-icon:hover {
        border: 1px solid #0091e1;
        color: #0091e1;
    }
</style>
