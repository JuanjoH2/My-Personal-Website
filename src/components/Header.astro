---
import Logo from "../assets/jjhWhite.svg";
import Menu from "./Menu.astro";
import Navigation from "./Navigation.astro";
---

<header class="main-header">
    <a href="/" class="home-link">
        <Logo class="logo" aria-label="Return to homepage" />
    </a>

    <div class="menu">
        <Menu aria-label="Open menu" />
        <Navigation />
    </div>
</header>

<style>
    .main-header {
        /* Pins the header to the top of the viewport */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 64px;
        /* Defines the height of the header (64px) */

        /* Ensure the header is always on top of other content */
        z-index: 100;

        /* Basic styling for visibility */
        background-color: #1e1f20, 0;

        /* Flex alignment for logo placement */
        display: flex;

        /* Vertically center the logo */
        align-items: center;

        justify-content: space-between;
    }

    /* Style for the SVG/Logo element */
    .logo {
        height: 64px;
        width: 64px;
        display: block;
        margin-top: 16px;
        margin-left: 16px;
    }

    .menu {
        margin-top: 16px;
        margin-right: 16px;
    }
</style>

<script>
    const toggleButton = document.getElementById("menu-toggle");
    const navLinks = document.getElementById("main-menu-links");

    if (toggleButton && navLinks) {
        // 1. Toggle Menu Visibility on Button Click
        toggleButton.addEventListener("click", () => {
            // Toggles the 'expanded' class, which controls the menu's display property in CSS
            navLinks.classList.toggle("expanded");

            // Toggles the 'aria-expanded' attribute for screen reader accessibility
            const isExpanded =
                toggleButton.getAttribute("aria-expanded") === "true" || false;
            toggleButton.setAttribute("aria-expanded", String(!isExpanded));
        });

        // 2. Auto-Close Menu on Link Click (Optional, but recommended for navigation)
        // This provides a better user experience since the menu closes after a page navigation starts.
        navLinks.querySelectorAll("a").forEach((link) => {
            link.addEventListener("click", () => {
                navLinks.classList.remove("expanded");
                toggleButton.setAttribute("aria-expanded", "false");
            });
        });
    }
</script>
